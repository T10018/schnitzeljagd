<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aufgabe 1</title>
  <link rel="stylesheet" href="../../style/speech.css">
</head>
<body>

  <img id="character" src="../../images/character1.png" alt="Charakter">

  <div id="speech">Ihr habt sie gerettet, Feldmarschall – alle sind in Sicherheit. Vor der Kirche sammeln sich Dutzende zur Evakuierung, dank Eurer Hilfe.</div>

  <button class="button bottom-left" onclick="previous()" id="backBtn" style="display: none;">Zurück</button>
  <button class="button bottom-right" onclick="next()" id="nextBtn">Weiter</button>

  <script>
    const lines = [
      "Ihr habt sie gerettet, Feldmarschall – alle sind in Sicherheit. Vor der Kirche sammeln sich Dutzende zur Evakuierung, dank Eurer Hilfe. ",
      "Ein Stück Hoffnung, ein Stück Menschlichkeit – inmitten all des Chaos. Doch noch ist nichts entschieden. "
    ];

    let index = 0;

    function updateSpeech() {
      const speechElement = document.getElementById("speech");
      const backBtn = document.getElementById("backBtn");
      const nextBtn = document.getElementById("nextBtn");
      
      // Fade-Effekt
      speechElement.style.opacity = '0';
      
      setTimeout(() => {
        speechElement.innerHTML = lines[index];
        speechElement.style.opacity = '1';
      }, 200);
      
      backBtn.style.display = index > 0 ? "block" : "none";
      nextBtn.innerHTML = "Weiter";
    }

    function next() {
      if (index < lines.length - 1) {
        index++;
        updateSpeech();
      } else {
        // Fade-out-Effekt vor dem Seitenwechsel
        document.body.classList.add('fade-out');
        requestAnimationFrame(() => {
        setTimeout(() => {
          window.location.href = "speech_task5_end.html";
          navigator.vibrate([2500, 100]);
        }, 500);
        });
      }
    }

    function previous() {
      if (index > 0) {
        index--;
        updateSpeech();
      }
    }
  </script>
</body>
</html>