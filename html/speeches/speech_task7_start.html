<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aufgabe 1</title>
  <link rel="stylesheet" href="../../style/speech.css">
</head>
<body>
  <img id="character" src="../../images/character1.png" alt="Charakter">

  <div id="speech">Feldmarschall, die Franzosen sind nun auch schon in Linz – unsere letzte Verbindung über die Traun ist in Gefahr. Sie ist unser einziger Übergang zur Stadt. Doch wenn sie dem Feind in die Hände fällt… wäre alles verloren.</div>

  <button class="button bottom-left" onclick="previous()" id="backBtn" style="display: none;">Zurück</button>
  <button class="button bottom-right" onclick="next()" id="nextBtn">Weiter</button>

  <script>
    const lines = [
      "Feldmarschall, die Franzosen sind nun auch schon in Linz. Unsere letzte Verbindung über die Traun ist in Gefahr. Sie ist unser einziger Übergang zur Stadt. Doch wenn sie dem Feind in die Hände fällt… wäre alles verloren. ",
      "Je mehr kluge Entscheidungen Ihr zuvor getroffen habt, desto besser stehen unsere Chancen, die Brücke zu halten. ",
      "Ein Feldmarschall, der mit Weitsicht und Mut geführt hat, kann jetzt die Früchte seiner Taten ernten. Doch wer zu oft gezögert oder falsch gewählt hat, riskiert alles… ",
      "Nun liegt es bei Euch, Fackeln wir die Brücke ab, um unseren Rückzug zu sichern oder stellen wir uns dem Feind und verteidigen Ebelsberg bis zum letzten Mann? "
    ];

    let index = 0;

    function updateSpeech() {
      const speechElement = document.getElementById("speech");
      const backBtn = document.getElementById("backBtn");
      const nextBtn = document.getElementById("nextBtn");
      
      // Fade-Effekt
      speechElement.style.opacity = '0';
      
      setTimeout(() => {
        speechElement.innerHTML = lines[index];
        speechElement.style.opacity = '1';
      }, 200);
      
      backBtn.style.display = index > 0 ? "block" : "none";
      nextBtn.innerHTML = "Weiter";
    }

    function next() {
      if (index < lines.length - 1) {
        index++;
        updateSpeech();
      } else {
        // Fade-out-Effekt vor dem Seitenwechsel
        document.body.classList.add('fade-out');
        requestAnimationFrame(() => {
        setTimeout(() => {
          window.location.href = "../schnitzeljagd_aufgaben/task7/task7.html";
        }, 500);
        });
      }
    }

    function previous() {
      if (index > 0) {
        index--;
        updateSpeech();
      }
    }
  </script>
</body>
</html>