<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aufgabe 1</title>
  <link rel="stylesheet" href="../../style/speech.css">
</head>
<body>
  <img id="character" src="../../images/character1.png" alt="Charakter">

  <div id="speech">Feldmarschall… unser Vormarsch stockt. Unsere Truppen können nicht ihr volles Potential ausschöpfen. Der Feind wird die engen Gassen zu seinem Vorteil nutzen. </div>

  <button class="button bottom-left" onclick="previous()" id="backBtn" style="display: none;">Zurück</button>
  <button class="button bottom-right" onclick="next()" id="nextBtn">Weiter</button>

  <script>
    const lines = [
      "Feldmarschall… unser Vormarsch stockt. Unsere Truppen können nicht ihr volles Potential ausschöpfen. Der Feind wird die engen Gassen zu seinem Vorteil nutzen. ",
      "Wir haben wertvolle Zeit verloren und unsere werden Männer unter widrigen Bedingungen kämpfen müssen. Doch noch ist nicht alles verloren. ",
      "Noch liegt es in Eurer Hand, aus diesem Rückschlag einen Widerstand zu machen, den sie nicht vergessen werden. "
    ];

    let index = 0;

    function updateSpeech() {
      const speechElement = document.getElementById("speech");
      const backBtn = document.getElementById("backBtn");
      const nextBtn = document.getElementById("nextBtn");
      
      // Fade-Effekt
      speechElement.style.opacity = '0';
      
      setTimeout(() => {
        speechElement.innerHTML = lines[index];
        speechElement.style.opacity = '1';
      }, 200);
      
      backBtn.style.display = index > 0 ? "block" : "none";
      nextBtn.innerHTML = "Weiter";
    }

    function next() {
      if (index < lines.length - 1) {
        index++;
        updateSpeech();
      } else {
        // Fade-out-Effekt vor dem Seitenwechsel
        document.body.classList.add('fade-out');
        requestAnimationFrame(() => {
        setTimeout(() => {
          window.location.href = "../map/map6.html";
        }, 500);
        });
      }
    }

    function previous() {
      if (index > 0) {
        index--;
        updateSpeech();
      }
    }
  </script>
</body>
</html>