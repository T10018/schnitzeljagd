<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schlacht bei Ebelsberg 1809 - Charakter-Dialog</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');

    * {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Crimson Text', serif;
  background: linear-gradient(135deg, #2c1810, #6b4423);
  min-height: 100vh;
  overflow: hidden;
  position: relative;
}

/* Hintergrundmuster (optional) */
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-image: radial-gradient(circle at 25% 25%, rgba(139, 69, 19, 0.1) 0%, transparent 25%),
                    radial-gradient(circle at 75% 75%, rgba(160, 82, 45, 0.1) 0%, transparent 25%);
  background-size: 200px 200px;
  pointer-events: none;
  z-index: 1;
}

/* Pergament-Rahmen */
body::after {
  content: '';
  position: fixed;
  top: 10px; left: 10px; right: 10px; bottom: 10px;
  border: 3px solid #8b4513;
  border-radius: 15px;
  box-shadow: inset 0 0 20px rgba(139, 69, 19, 0.3), 0 0 30px rgba(0, 0, 0, 0.5);
  pointer-events: none;
  z-index: 2;
}

/* Charakterbild */
#character {
  position: fixed;
  bottom: -10px;
  left: 50px;
  height: 55vh;
  max-height: 550px;
  filter: sepia(20%) contrast(1.1) brightness(0.95);
  z-index: 3;
  transition: transform 0.3s ease, filter 0.3s ease;
}

#character:hover {
  transform: scale(1.02);
  filter: sepia(20%) contrast(1.2) brightness(1.05);
}

/* Sprechblase */
#speech {
  position: fixed;
  top: 8vh;
  left: 50%;
  transform: translateX(-50%);
  width: 85%;
  max-width: 700px;
  background: linear-gradient(145deg, #2c1810, #4a3728);
  border: 4px solid #8b4513;
  border-radius: 20px;
  padding: 2rem 2.5rem;
  font-size: 1.3rem;
  line-height: 1.6;
  color: #f4f1e8;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4),
              inset 0 2px 5px rgba(255, 255, 255, 0.1),
              inset 0 -2px 5px rgba(139, 69, 19, 0.2);
  z-index: 5;
  transition: opacity 0.3s ease;
}

#speech::before {
  content: '';
  position: absolute;
  top: -8px; left: -8px; right: -8px; bottom: -8px;
  background: linear-gradient(45deg, #8b4513, #a0522d, #8b4513);
  border-radius: 25px;
  z-index: -1;
}

#speech::after {
  content: '❦';
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 1.5rem;
  color: #8b4513;
  opacity: 0.6;
}

/* Buttons */
.button {
  position: fixed;
  padding: 1.2rem 2rem;
  border: 3px solid #8b4513;
  border-radius: 15px;
  font-size: 1.1rem;
  font-family: 'Cinzel', serif;
  font-weight: 600;
  cursor: pointer;
  color: #f4f1e8;
  z-index: 10;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3),
              inset 0 2px 5px rgba(255, 255, 255, 0.1);
}

.button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4),
              inset 0 2px 8px rgba(255, 255, 255, 0.2);
}

.button:active {
  transform: translateY(0);
}

.bottom-right {
  bottom: 30px;
  right: 30px;
  background: linear-gradient(145deg, #b8860b, #daa520);
}

.bottom-left {
  bottom: 30px;
  left: 30px;
  background: linear-gradient(145deg, #696969, #808080);
}

.bottom-right:hover {
  background: linear-gradient(145deg, #daa520, #b8860b);
}

.bottom-left:hover {
  background: linear-gradient(145deg, #808080, #696969);
}

/* Partikel */
.particle {
  position: fixed;
  width: 3px;
  height: 3px;
  background: rgba(255, 215, 0, 0.3);
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  animation: float 8s infinite ease-in-out;
}

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0; }
  50% { transform: translateY(-100vh) rotate(360deg); opacity: 1; }
}

/* Responsive Anpassungen */
@media (max-width: 768px) {
  #speech {
    width: 90%;
    padding: 1.5rem 2rem;
    font-size: 1.1rem;
    top: 10vh;
  }

  .button {
    padding: 1rem 1.5rem;
    font-size: 1rem;
  }

  #character {
    height: 40vh;
    left: 20px;
  }
}

.fade-out {
  opacity: 0;
  transition: opacity 0.5s ease;
}
  </style>
</head>
<body>

  <img id="character" src="../pics/pic1.png" alt="Österreichischer Offizier">

  <div id="speech">Seiet gegrüßt, Feldmarschall Fabian.</div>

  <button class="button bottom-left" onclick="previous()" id="backBtn" style="display: none;">‹ Zurück</button>
  <button class="button bottom-right" onclick="next()" id="nextBtn">Weiter ›</button>

  <script>
    const lines = [
      "Seiet gegrüßt, Feldmarschall Fabian.",
      "Die Lage ist ernst. Französische Vorhuten wurden bereits jenseits von Wels gesichtet, sie marschieren rasch und ohne Rast. Es bleibt uns wenig Zeit.", 
      "Ihr werdet mit dem Kommando über die Verteidigung von Ebelsberg betraut. Die Brücke über die Traun ist unser letzter Übergang, fällt sie, so verlieren wir den Anschluss an die Landeshauptstadt.",
      "Ihr müsst nun klug und rasch handeln. Ich werde Euch mit Rat zur Seite stehen, soweit es mir möglich ist, auch wenn ich selbst diesen Kampf nicht mehr mit dem Säbel fechten kann.<br><br>Doch ich kenne diese Straßen, diese Männer und unsere Chancen.",
      "Verzaget nicht, Feldmarschall. Österreich zählt auf Euch."
    ];

    let index = 0;

    // Atmosphärische Partikel erstellen
    function createParticles() {
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + 'vw';
          particle.style.animationDelay = Math.random() * 8 + 's';
          particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
          document.body.appendChild(particle);
          
          setTimeout(() => {
            particle.remove();
          }, 10000);
        }, i * 2000);
      }
    }

    function updateSpeech() {
      const speechElement = document.getElementById("speech");
      const backBtn = document.getElementById("backBtn");
      const nextBtn = document.getElementById("nextBtn");
      
      // Fade-Effekt
      speechElement.style.opacity = '0';
      
      setTimeout(() => {
        speechElement.innerHTML = lines[index];
        speechElement.style.opacity = '1';
      }, 200);
      
      backBtn.style.display = index > 0 ? "block" : "none";
      nextBtn.innerHTML = "Weiter ›";
    }

    function next() {
      if (index < lines.length - 1) {
        index++;
        updateSpeech();
      } else {
        // Fade-out-Effekt vor dem Seitenwechsel
        document.body.classList.add('fade-out');
        setTimeout(() => {
          window.location.href = "welcome.html";
        }, 500);
      }
    }

    function previous() {
      if (index > 0) {
        index--;
        updateSpeech();
      }
    }

    // Tastatur-Navigation
    document.addEventListener('keydown', function(event) {
      if (event.key === 'ArrowRight' || event.key === ' ') {
        event.preventDefault();
        next();
      } else if (event.key === 'ArrowLeft') {
        event.preventDefault();
        previous();
      }
    });

    // Partikel beim Laden starten
    window.addEventListener('load', function() {
      createParticles();
      setInterval(createParticles, 30000);
    });

    // Smooth transitions
    document.getElementById("speech").style.transition = "opacity 0.3s ease";
  </script>

</body>
</html>